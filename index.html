<!DOCTYPE HTML><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="manifest" href="/whiskey/manifest.json"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content="Whiskey Fever"><link rel="apple-touch-icon" href="icons/icon-152x152.png"><style type="text/css">body { margin: 0; padding: 0; background: #222; font-family: "Lucida Console", Courier, monospace; -webkit-touch-callout: none; -webkit-user-select: none; -moz-user-select: none; user-select: none; } canvas { background: #fff; display: block; margin: 0 auto; display: none; image-rendering: pixelated; image-rendering: -moz-pixelated; image-rendering: -webkit-pixelated; } canvas.hover { cursor: pointer; } h1 { left: 0; line-height: 200px; margin: auto; margin-top: -100px; position: absolute; top: 50%; width: 100%; text-align: center; } #l { color: #fff; font-size: 150%; }</style></head><body><div id="l"><h1 id="h">Loading</h1></div><div id="fs"></div><canvas></canvas><script>function SfxrParams(){this.set=function(r){for(var a=0;24>a;a++)this[String.fromCharCode(97+a)]=r[a]||0;this.c<.01&&(this.c=.01);var e=this.b+this.c+this.e;if(.18>e){var s=.18/e;this.b*=s,this.c*=s,this.e*=s}}}function SfxrSynth(){var r=this;this._params=new SfxrParams;var a,e,s,t,n,i,h,f,c,v,o,u;r.r=function(){var a=r._params;t=100/(a.f*a.f+.001),n=100/(a.g*a.g+.001),i=1-a.h*a.h*a.h*.01,h=-a.i*a.i*a.i*1e-6,a.a||(o=.5-a.n/2,u=5e-5*-a.o),f=1+a.l*a.l*(a.l>0?-.9:10),c=0,v=1==a.m?0:(1-a.m)*(1-a.m)*2e4+32},r.tr=function(){r.r();var t=r._params;return a=t.b*t.b*1e5,e=t.c*t.c*1e5,s=t.e*t.e*1e5+12,3*((a+e+s)/3|0)},r.s=function(b,m){var w=r._params,y=1!=w.s||w.v,k=w.v*w.v*.1,p=1+3e-4*w.w,g=w.s*w.s*w.s*.1,x=1+1e-4*w.t,S=1!=w.s,d=w.x*w.x,l=w.g,A=w.q||w.r,q=w.r*w.r*w.r*.2,M=w.q*w.q*(w.q<0?-1020:1020),_=w.p?((1-w.p)*(1-w.p)*2e4|0)+32:0,U=w.d,j=w.j/2,C=w.k*w.k*.01,P=w.a,z=a,B=1/a,D=1/e,E=1/s,F=5/(1+w.u*w.u*20)*(.01+g);F>.8&&(F=.8),F=1-F;for(var G,H,I,J,K,L,N=!1,O=0,Q=0,R=0,T=0,V=0,W=0,X=0,Y=0,Z=0,$=0,rr=new Array(1024),ar=new Array(32),er=rr.length;er--;)rr[er]=0;for(var er=ar.length;er--;)ar[er]=2*Math.random()-1;for(var er=0;m>er;er++){if(N)return er;if(_&&++Z>=_&&(Z=0,r.r()),v&&++c>=v&&(v=0,t*=f),i+=h,t*=i,t>n&&(t=n,l>0&&(N=!0)),H=t,j>0&&($+=C,H*=1+Math.sin($)*j),H|=0,8>H&&(H=8),P||(o+=u,0>o?o=0:o>.5&&(o=.5)),++Q>z)switch(Q=0,++O){case 1:z=e;break;case 2:z=s}switch(O){case 0:R=Q*B;break;case 1:R=1+2*(1-Q*D)*U;break;case 2:R=1-Q*E;break;case 3:R=0,N=!0}A&&(M+=q,I=0|M,0>I?I=-I:I>1023&&(I=1023)),y&&p&&(k*=p,1e-5>k?k=1e-5:k>.1&&(k=.1)),L=0;for(var sr=8;sr--;){if(X++,X>=H&&(X%=H,3==P))for(var tr=ar.length;tr--;)ar[tr]=2*Math.random()-1;switch(P){case 0:K=o>X/H?.5:-.5;break;case 1:K=1-X/H*2;break;case 2:J=X/H,J=6.28318531*(J>.5?J-1:J),K=1.27323954*J+.405284735*J*J*(0>J?1:-1),K=.225*((0>K?-1:1)*K*K-K)+K;break;case 3:K=ar[Math.abs(32*X/H|0)]}y&&(G=W,g*=x,0>g?g=0:g>.1&&(g=.1),S?(V+=(K-W)*g,V*=F):(W=K,V=0),W+=V,T+=W-G,T*=1-k,K=T),A&&(rr[Y%1024]=K,K+=rr[(Y-I+1024)%1024],Y++),L+=K}L*=.125*R*d,b[er]=L>=1?32767:-1>=L?-32768:32767*L|0}return m}}var synth=new SfxrSynth,jsfxr=function(r){synth._params.set(r);var a=synth.tr(),e=new Uint8Array(4*((a+1)/2|0)+44),s=2*synth.s(new Uint16Array(e.buffer,44),a),t=new Uint32Array(e.buffer,0,44);t[0]=1179011410,t[1]=s+36,t[2]=1163280727,t[3]=544501094,t[4]=16,t[5]=65537,t[6]=44100,t[7]=88200,t[8]=1048578,t[9]=1635017060,t[10]=s,s+=44;for(var n=0,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="data:audio/wav;base64,";s>n;n+=3){var f=e[n]<<16|e[n+1]<<8|e[n+2];h+=i[f>>18]+i[f>>12&63]+i[f>>6&63]+i[63&f]}return h};
"use strict";function _possibleConstructorReturn(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function _inherits(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var _get=function t(i,e,s){null===i&&(i=Function.prototype);var h=Object.getOwnPropertyDescriptor(i,e);if(void 0===h){var a=Object.getPrototypeOf(i);return null===a?void 0:t(a,e,s)}if("value"in h)return h.value;var n=h.get;if(void 0!==n)return n.call(s)},_createClass=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}();$={cols:{black:"#000",ash:"#9d9d9d",blind:"#fff",bloodred:"#be2633",pigmeat:"#e06f8b",oldpoop:"#493C2B",newpoop:"#a46422",blaze:"#eb8931",zornskin:"#f7e26b",shadegreen:"#2f484e",leafgreen:"#44891A",slimegreen:"#A3CE27",nightblue:"#1B2632",seablue:"#005784",skyblue:"#31A2F2",cloudblue:"#B2DCEF"}},window.addEventListener("load",function(){new Game},!1),$.data={version:"0.1",title:"Whiskey Fever",orientation:"portrait",audio:!0},$.data.i={circle:"R0lGODlhCAAIAIABAP///zGi8iH5BAEKAAEALAAAAAAIAAgAAAIOTIBgp+ybFmwyzodmDgUAOw==",cloud:"R0lGODlhMAAKAMIFAAAAABsmMi9ITr4mM52dnf///////////yH5BAEKAAcALAAAAAAwAAoAAANoeLrc/jDGQIO8D2hwg/iCNVWUBAzowEEe+IlO68LNmaIrQ7kzvfMvmuZ20yxkBFfypZABQSKbqpjiOJcfbAipJWADUpy46HxCy9symMiuHtQ/5nt2hCrCqqG7STpWdH18JQsbRncbCgkAOw==",drop:"R0lGODlhBgAIAKECAOuJMffia////////yH5BAEKAAIALAAAAAAGAAgAAAINlGGJugKPoIQhgspMAQA7",font:"R0lGODlhjwAFAIABAAAAAP///yH5BAEKAAEALAAAAACPAAUAAAJzDGKHcLzOFDRJ0UbXzdJ2lFQbRo5ipJ1TA7XsW2KanNWyZXpuzuNSz5txQDZTChSrsI6kXfOHDNmcl9+LKXxiU7fHBwV2zFxJzwZbGiazq+kyqua2h0I6vEhLh977Dm1fBaW1BvUwYmYY16UiuDN29VhRAAA7",grass:"R0lGODlhoAAqAMIHAEk8K6RkIkSJGuBvi6DO5LLc7/fiazGi8iH5BAEKAAcALAAAAACgACoAAAPseLqsMy3KSau9GBuTu//PJ44kKQilsqXMSblss8Y0Bpc3mzd73NctlE+II/JOxhdyyWw6n9CoFDatWq9Y6yPL7V4DgSp4PP6Sy17kGexdu93S9/NNr9vv+Lx+z+/73wCBgnSChX+HAYWDiHqLYIaJigCPjo5ukGOShJpklmuDi5idkoqjk5SToaSrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAMKHEiwoMGDCBN6SwAAOw==",heart:"R0lGODlhBQAFAKECAL4mM+Bvi////////yH5BAEKAAEALAAAAAAFAAUAAAIIDGygu3mBQgEAOw==",hills:"R0lGODlhoABDAIABAKDO5DGi8iH5BAEKAAEALAAAAACgAEMAAALnTICpC+YPo5y02ouz3pL533DiSJYmCabMybbuW6nyAtf2nc16gvf+vQuGfsSiSBg0KpcxZJIJZTqF0WpxSrVqgdjs9svqIsHkknhcTmvOaLWbwva+54+4nD633/Fq/f70xAfntzNCSCN4WGihuNjXKNMB2UWk4jAZeYCpZ1O4+QnKExZKWuq4YZqqarm26vqK2AQ7CztIe/sagbs7e8n7u6oJPExcbHyMnKy8zNzs/AwdLT1NXW19jZ2tvc3d7f0NHi4+Tl5ufo6err7O3u7+Dh8vP09fb3+Pn6+/z9/v/w8woMCBmAoAADs=",icon:"R0lGODlhBgAHAMIGAAUDCzWADOuJMffia/3//P///zGi8jGi8iH5BAEKAAcALAAAAAAGAAcAAAMReLGhvEeQUYQS2GHR3jnAFyYAOw==",lightning:"R0lGODlhBQAZAIAAADGi8jGi8iH5BAEKAAEALAAAAAAFABkAAAIYTGCGudcAlXwnVduuZFghGHGduDmkhaIFADs=",p1:"R0lGODlhJAAIAMIHAAAAAAUDCzWADOuJMffia/3//P///zGi8iH5BAEKAAcALAAAAAAkAAgAAANSeLonLizKSCpRD2Y3gQfYc1jWBg1FVTTi95ljalyoyg4Dmx1AARiggUVBwuByD5xRyfssc6TKLaeDTJuu62hYPQQW3y4WJL6MFN/wJA1Gu9WRBAA7"},$.data.sfx={jump:[0,,.2432,,.1709,.3046,,.1919,,,,,,.5923,,,,,1,,,,,.5],powerup:[0,,.0129,.5211,.4714,.4234,,,,,,.4355,.5108,,,,,,1,,,,,.5],explode:[3,,.3708,.5822,.3851,.0584,,-.0268,,,,-.0749,.7624,,,,,,1,,,,,.5],levelup:[2,.0506,.8811,.0789,.9412,.5002,,.001,.3829,.0595,.4632,-.812,.7855,-.9121,.1173,.1088,-.3698,.1704,.8458,-.2283,,.1259,-.0298,.5],die:[2,.1987,.388,.4366,.0335,.5072,,.1128,-.1656,.1987,,-.376,.2686,-.684,.1392,-.6819,-.8117,-.1072,.9846,.057,,.004,-.0045,.56],drip:[2,,.096,.0306,.1507,.5682,,.062,.1642,.7539,.4601,.3383,.2139,,-.947,.3561,.0282,1e-4,.9998,.1985,.4432,6e-4,-.136,.5],fart:[0,.25,.86,.66,.84,.22,,-.3199,.0022,-.0131,.9164,.3911,,.7873,.4686,,.2566,.0307,.8693,.8432,.7706,.4253,-.0044,.5],tap:[1,,.1953,,.1186,.2659,,,,,,,,,,,,,1,,,.1,,.5],gameover:[0,.4581,.0141,.2338,.2849,.5105,,.002,-.2648,.952,,.3003,.0379,,-.0021,,-.0559,.3951,.9529,-.2469,.1062,.0043,-.0155,.6],drink:[0,,.0119,.91,.21,.5,,.1399,,.49,.07,.32,,,.08,,,,1,,,,,.82]},$.H={listen:function(t,i){window.addEventListener(t,i,!1)},el:function(t){return document.getElementById(t)},rnd:function(t,i){return~~(Math.random()*i)+t},rndArray:function(t){return t[~~(Math.random()*t.length)]},textWidth:function(t,i){return t.length*(3*i.scale)+t.length*(1*i.scale)},tween:function(t,i,e,s){return e*t/s+i},mkFavicon:function(t){var i=document.createElement("canvas");i.width=32,i.height=32;var e=i.getContext("2d");try{e.drawImage(t,0,0)}catch(s){return}var h=document.createElement("link");h.type="image/x-icon",h.rel="shortcut icon",h.href=i.toDataURL("image/x-icon"),document.getElementsByTagName("head")[0].appendChild(h)},mkCanvas:function(t,i){var e=document.createElement("canvas"),s=e.getContext("2d");return e.width=t,e.height=i,s.mozImageSmoothingEnabled=!1,s.msImageSmoothingEnabled=!1,s.imageSmoothingEnabled=!1,e},resize:function(t,i,e){i=i||1,e=e||!1;var s=t.width*i,h=t.height*i,a=document.createElement("canvas");a.width=t.width,a.height=t.height;var n=a.getContext("2d");n.drawImage(t,0,0);var r=n.getImageData(0,0,t.width,t.height),o=document.createElement("canvas");o.width=s,o.height=h;var l,c,u=o.getContext("2d"),d=u.getImageData(0,0,s,h);for(l=0;l<h;l++)for(c=0;c<s;c++){var g=4*(Math.floor(l/i)*t.width+Math.floor(c/i)),f=4*(l*s+c);d.data[f]=r.data[g],d.data[f+1]=r.data[g+1],d.data[f+2]=r.data[g+2],d.data[f+3]=r.data[g+3],0===r.data[g+3]?(d.data[f]=0,d.data[f+1]=0,d.data[f+2]=0,d.data[f+3]=0):e&&(d.data[f]=e[0],d.data[f+1]=e[1],d.data[f+2]=e[2],d.data[f+3]=255)}u.putImageData(d,0,0);var p=new Image;return p.src=o.toDataURL("image/png"),p}};var Load=function(){function t(i){_classCallCheck(this,t),this.g=i,this.imgsLoaded=0,this.imgsTotal=Object.keys($.data.i).length,this.loadImages()}return _createClass(t,[{key:"loadImages",value:function(){var t,i=this.g,e="data:image/gif;base64,",s=$.data.i;for(t in s)s.hasOwnProperty(t)&&(i.imgs[t]=new Image,i.imgs[t].onload=this.checkLoaded(),i.imgs[t].src=e+s[t])}},{key:"checkLoaded",value:function(){var t=this,i=(this.g,this);this.imgsLoaded+=1,i.imgsLoaded===i.imgsTotal&&window.setTimeout(function(){return t.mkFonts()},100)}},{key:"mkFonts",value:function(){var t=this.g,i={b:[0,0,0],w:[255,255,255],g:[163,206,39],r:[190,38,51],o:[235,137,49],p:[224,111,139]},e=t.imgs,s=void 0;for(s in i)t.fonts[s]=$.H.resize(t.imgs.font,1,i[s]);for(s in e)e[s+"_w"]=$.H.resize(e[s],1,[255,255,255]);window.setTimeout(function(){t.init()},10)}}]),t}();$.Audio={init:function(){var t=AudioContext||webkitAudioContextx;this.ctx=!!t&&new t,this.ctx&&this.encode()},encode:function(){var t=this;t.sounds=[];var i=function(t){var i,e,s;for(t=jsfxr(t),t=atob(t.substr(t.indexOf(",")+1)),i=t.length,e=new Uint8Array(i),s=0;s<i;s++)e[s]=t.charCodeAt(s);return e.buffer},e=function(e){t.ctx.decodeAudioData(i($.data.sfx[e]),function(i){t.sounds[e]=i})};for(var s in $.data.sfx)e(s)},play:function(t){if(this.ctx&&this.sounds[t]){var i=this.ctx.createBufferSource();i.buffer=this.sounds[t],i.connect(this.ctx.destination),i.start(0)}}};var Game=function(){function t(){_classCallCheck(this,t);var i=navigator.userAgent.toLowerCase(),e=void 0,s=void 0;this.l=document.getElementById("l"),this.l=document.getElementById("h"),"portrait"===$.data.orientation?(e=320,s=480):(e=480,s=320),this.c=document.getElementsByTagName("canvas")[0],this.ctx=this.c.getContext("2d"),this.w=e,this.h=s,this.c.width=e,this.c.height=s,this.c.style.width=e+"px",this.c.style.height=s+"px",this.dt=0,this.tick=0,this.prevStep=(new Date).getTime(),this.currStep=(new Date).getTime(),this.mobile="createTouch"in document||!1,this.android=i.indexOf("android")>-1,this.ios=/ipad|iphone|ipod/.test(i),this.firefox=i.indexOf("firefox")>-1,this.plays=0,this.events=[],this.ents=[],this.imgs=[],this.fonts=[],this.sfx=[],document.title=$.data.title,this.load()}return _createClass(t,[{key:"load",value:function(){this.draw=new Draw(this.ctx,this.w,this.h),this.input=new Input(this),this.emitter=new Emitter(this),this.shake=new Shake(this),this.load=new Load(this),$.data.audio?(this.audio=$.Audio,this.audio.init()):this.audio={play:function(){},say:function(){}}}},{key:"init",value:function(){var t=this;this.scale(),$.H.mkFavicon(this.draw.scale(this.imgs.icon,4)),this.changeState("Title"),"undefined"!=typeof Stats&&window.location.search.indexOf("stats")!==-1?(this.stats=new Stats,this.stats.showPanel(0),document.body.appendChild(this.stats.dom)):this.stats={begin:function(){},end:function(){}},this.loop(),window.addEventListener("resize",function(){return t.scale()},!1)}},{key:"loop",value:function(){var t=this;document.hasFocus()?(this.stats.begin(),this.currStep=(new Date).getTime(),this.dt=this.currStep-this.prevStep,this.tick+=1,this.c.className="",this.input.poll(),this.shake.update(),this.state.update(),this.state.render(),this.prevStep=this.currStep,this.stats.end()):this.dt=15,requestAnimationFrame(function(){return t.loop()})}},{key:"update",value:function(){var t=!0,i=!1,e=void 0;try{for(var s,h=this.ents[Symbol.iterator]();!(t=(s=h.next()).done);t=!0){var a=s.value;a.update()}}catch(n){i=!0,e=n}finally{try{!t&&h["return"]&&h["return"]()}finally{if(i)throw e}}}},{key:"render",value:function(){this.draw.clear(),this.draw.rect(100,100,100,100,"pink");var t=!0,i=!1,e=void 0;try{for(var s,h=this.ents[Symbol.iterator]();!(t=(s=h.next()).done);t=!0){var a=s.value;a.render()}}catch(n){i=!0,e=n}finally{try{!t&&h["return"]&&h["return"]()}finally{if(i)throw e}}}},{key:"scale",value:function(){"portrait"===$.data.orientation?this.scalePortrait():this.scaleLandscape()}},{key:"scalePortrait",value:function(){var t=window.innerHeight,i=this.w/this.h,e=t*i;e/this.w;this.mobile&&t<window.innerWidth?(this.l.style.display="block",$.H.el("h").innerHTML="Rotate Device",this.c.style.display="none"):(this.l.style.display="none",this.c.style.display="block"),window.navigator.standalone===!0&&this.ios||(this.c.width=this.w,this.c.height=this.h,this.cx=this.w/2,this.cy=this.h/2,this.c.style.width=~~e+"px",this.c.style.height=~~t+"px")}},{key:"scaleLandscape",value:function(){}},{key:"changeState",value:function(t){switch(this.ents=[],this.events=[],t){case"Touch":this.state=new Touch(this);break;case"Title":this.state=new Title(this);break;case"Intro":this.state=new Intro(this);break;case"Splash":this.state=new Splash(this);break;case"Play":this.state=new Play(this)}}},{key:"mkFont",value:function(t,i){var e=this,s=e.draw.scale(e.fonts[t],i);return s.scale=i,s}},{key:"addEvent",value:function(t){this.events.push(t)}}]),t}(),State=function(){function t(i){_classCallCheck(this,t),this.g=i,this.init()}return _createClass(t,[{key:"init",value:function(){this.bgCol=$.cols.nightblue,this.fader=0}},{key:"update",value:function(){var t=this.g,i=t.ents.length,e=!0,s=!1,h=void 0;try{for(var a,n=t.ents[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){var r=a.value;r.update()}}catch(o){s=!0,h=o}finally{try{!e&&n["return"]&&n["return"]()}finally{if(s)throw h}}for(;i--;)t.ents[i].remove&&t.ents.splice(i,1);for(i=t.events.length;i--;){var l=t.events[i];if(!l)break;l.time-=t.dt/1e3,l.time<0&&(l.cb.call(this),t.events.splice(i,1))}this.fader=Math.sin(.005*(new Date).getTime())}},{key:"render",value:function(){this.g.draw.clear(this.bgCol);var t=!0,i=!1,e=void 0;try{for(var s,h=this.g.ents[Symbol.iterator]();!(t=(s=h.next()).done);t=!0){var a=s.value;a.render()}}catch(n){i=!0,e=n}finally{try{!t&&h["return"]&&h["return"]()}finally{if(i)throw e}}}}]),t}(),Input=function(){function t(i){var e=this;_classCallCheck(this,t);var s=window.addEventListener;this.g=i,this.up=!1,this.down=!1,this.left=!1,this.right=!1,this.m={x:i.w/2,y:i.h/2,click:0},this.keys={up:0,down:0,left:0,right:0,shoot:0,enter:0},this.keyMappings={up:38,down:40,left:37,right:39,shoot:32,enter:13},s("keydown",function(t){return e.press(t,1)},!1),s("keyup",function(t){return e.press(t,0)},!1),s("mousemove",function(t){return e.trackMove(t)},!1),s("mousedown",function(t){return e.m.click=1},!1),s("mouseup",function(t){return e.m.click=0},!1),s("touchstart",function(t){e.m.click=1,e.trackMove(t.touches[0])},!1),s("touchend",function(t){e.m.click=0,e.trackMove(t.touches[0])},!1),s("touchmove",function(t){t.preventDefault(),e.trackMove(t.touches[0])},!1)}return _createClass(t,[{key:"poll",value:function(){}},{key:"press",value:function(t,i){for(var e in this.keyMappings)t.keyCode===this.keyMappings[e]&&(this.keys[e]=i)}},{key:"trackMove",value:function(t){var i=this.g,e=i.c.offsetTop,s=i.c.offsetLeft,h=parseInt(i.c.style.width,10)/i.c.width,a=~~((t.pageX-s)/h),n=~~((t.pageY-e)/h);a=a>i.w?i.w:a,a=a<0?0:a,n=n>i.h?i.h:n,n=n<0?0:n,this.m.x=~~a,this.m.y=~~n}}]),t}(),Draw=function(){function t(i,e,s){_classCallCheck(this,t),this.ctx=i,this.w=e,this.h=s}return _createClass(t,[{key:"clear",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"#000":arguments[0];this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.w,this.h)}},{key:"rect",value:function(t,i,e,s,h){this.ctx.fillStyle=h,this.ctx.fillRect(t,i,e,s)}},{key:"circle",value:function(t,i,e){this.ctx.beginPath(),this.ctx.fillStyle="#fff",this.ctx.arc(t,i,e,0,2*Math.PI),this.ctx.closePath()}},{key:"scale",value:function(t,i,e){var s=void 0,h=void 0;try{s=$.H.mkCanvas(t.width*i,t.height*i),h=s.getContext("2d")}catch(a){console.log(a,t,i,e)}return s.width&&(h.save(),h.scale(i,i),h.drawImage(t,0,0),h.restore()),s}},{key:"flip",value:function(t,i,e){var s=$.H.mkCanvas(t.width,t.height),h=s.getContext("2d"),a=i?-1:1,n=e?-1:1,r=i?t.width*-1:0,o=e?t.height*-1:0;return s.width=t.width,s.height=t.height,h.save(),h.scale(a,n),h.drawImage(t,r,o,t.width,t.height),h.restore(),s}},{key:"text",value:function(t,i,e,s){var h=0,a=this.ctx,n=65,r=0,o=3*i.scale,l=5*i.scale,c=1*i.scale,u=$.H.textWidth(t,i),d=0;for("number"!=typeof t&&"0"!==t[0]||(t+="",r=43),e=e||(this.w-u)/2,h=0;h<t.length;h+=1)d=(t.charCodeAt(h)-n+r)*(o+c),d>-1&&a.drawImage(i,d,0,o,l,~~e,~~s,o,l),e+=o+c}}]),t}(),Sprite=function(){function t(i){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,t),this.g=i,this.dead=!1,this.remove=!1,this.id=Date.now()+"-"+i.ents.length,this.angle=0,this.tick=0,this.lastPos={x:this.x,y:this.y},this.flip={x:0,y:0},this.scale=e.scale||1,this.frame=e.frame||1,this.frames=e.frames||1,this.frameRate=e.frameRate||80,this.frameNext=e.frameNext||0;for(var s in e)this[s]=e[s];e.i&&this.mkImg(e.i),this.init()}return _createClass(t,[{key:"init",value:function(){this.anims={idle:{frames:[1],rate:80}},this.changeAnim("idle")}},{key:"update",value:function(){this.lastPos.x=this.x,this.lastPos.y=this.y,this.tick+=this.g.dt/100,this.collidesWith&&this.hitGroup(this.collidesWith),this.updateAnim(),this.updateMove(),this.restrictToScreen(),this.gravity&&(this.vy+=this.gravity*this.g.dt)}},{key:"updateAnim",value:function(){this.frameNext<0&&(this.frameNext=this.anim.rate,this.anim.counter+=1,this.anim.counter>=this.anim.frames.length&&(this.anim.next?this.changeAnim(this.anim.next):this.anim.counter=0),this.frame=this.anim.frames[this.anim.counter]),this.frameNext-=this.g.dt}},{key:"updateMove",value:function(){}},{key:"restrictToScreen",value:function(){this.x<0&&(this.x=0),this.x>this.g.w-this.w&&(this.x=this.g.w-this.w),this.y<0&&(this.y=0),this.y>this.g.h-this.h&&(this.y=this.g.h-this.h)}},{key:"render",value:function(){var t=this.g,i=this.i,e=this.frame;i?(this.flip.y&&(i=t.draw.flip(i,0,1)),this.flip.x&&(i=t.draw.flip(i,1,0),e=this.frames-this.frame+1),t.ctx.drawImage(i,e*this.w-this.w,0,this.w,this.h,~~this.x,~~this.y,this.w,this.h)):this.g.draw.rect(~~this.x,~~this.y,this.w,this.h,this.col)}},{key:"doDamage",value:function(t){}},{key:"receiveDamage",value:function(t){}},{key:"kill",value:function(){this.dead=!0,this.remove=!0}},{key:"hitGroup",value:function(t){for(var i=this.g,e=i.ents.length;e--;)i.ents[e]&&i.ents[e].group===t&&i.ents[e].id!==this.id&&this.hit(i.ents[e])&&i.ents[e].dead===!1&&(this.doDamage(i.ents[e]),i.ents[e].receiveDamage(this))}},{key:"hit",value:function(t){return!(t.y+t.h-1<this.y||t.y>this.y+this.h-1||t.x+t.w-1<this.x||t.x>this.x+this.w-1)}},{key:"mkImg",value:function(t){var i=this.g;this.i=i.draw.scale(i.imgs[t],this.scale),this.w=this.i.width/this.frames,this.h=this.i.height,this.iHurt=i.draw.scale(i.imgs[t+"_w"],this.scale)}},{key:"changeAnim",value:function(t){this.anim&&this.anim.name&&this.anim.name===t||(this.anim=this.anims[t],this.anim.name=t,this.anim.counter=0,this.frame=this.anim.frames[0],this.frameNext=this.anim.rate)}}]),t}(),Particle=function(t){function i(t,e){_classCallCheck(this,i);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(i).call(this,t,e));return s.name="particle",s.scale=1,s.group="na",s.w=4,s.h=4,s.lifespan=$.H.rnd(20,50),s.ttl=s.lifespan,s.alpha=1,s.vx=($.H.rnd(0,600)-300)/1e3,s.vy=($.H.rnd(0,600)-300)/1e3,s}return _inherits(i,t),_createClass(i,[{key:"update",value:function(){_get(Object.getPrototypeOf(i.prototype),"update",this).call(this),this.x+=this.vx*this.g.dt,this.y+=this.vy*this.g.dt,this.ttl-=1,this.ttl<0&&(this.remove=!0)}},{key:"render",value:function(){var t=this.g;t.ctx.globalAlpha=this.ttl/this.lifespan,t.draw.rect(this.x,this.y,5,5,$.cols[this.col]),t.ctx.globalAlpha=1}}]),i}(Sprite),Emitter=function(){function t(i){_classCallCheck(this,t),this.g=i}return _createClass(t,[{key:"particle",value:function(t,i,e){var s=arguments.length<=3||void 0===arguments[3]?["ash"]:arguments[3],h=this.g,a=void 0;for(a=0;a<t;a+=1){var n=$.H.rndArray(s);h.ents.push(new Particle(h,{x:i,y:e,col:n}))}}},{key:"explosion",value:function(t,i,e,s,h){for(var a=this.g,n=$.H.rnd;t--;)window.setTimeout(function(){a.ents.push(new Explosion(a,{x:i+n(-10,10),y:e+n(-10,10),magnitude:h,particles:s}))},150*t)}}]),t}(),Shake=function(){function t(i){_classCallCheck(this,t),this.g=i,this.c=i.c,this.ttl=0,this.mag=0}return _createClass(t,[{key:"start",value:function(t,i){this.mag=t,this.ttl=i,this.l=(window.innerWidth-this.c.style.width)/2}},{key:"update",value:function(){var t=(this.g,this.c),i=$.H.rnd(-this.mag,this.mag);this.ttl-=1,0===this.ttl?(t.style.marginLeft=this.l+"px",t.style.marginTop="0px"):this.ttl>0&&(t.style.marginTop=i+"px",t.style.marginLeft=i+this.l+"px")}}]),t}(),Button=function(t){function i(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,i),e.size=e.size||4,e.w=e.w||150,e.h=e.h||50,e.delay=e.delay||100,e.col=e.col||$.cols.slimegreen,e.triggerOnEnter=e.triggerOnEnter||!1,e.fadeIn=e.fadeIn||0;var s=_possibleConstructorReturn(this,Object.getPrototypeOf(i).call(this,t,e));return s.p=t.mkFont("w",e.size),s.pHover=t.mkFont("b",e.size),s.boxX=~~(s.g.w/2-s.w/2),s.boxY=s.y-15,s.clicked=!1,s.clickCol=e.clickCol||"#fff",s.currentCol=s.col,s.clicked=!1,s.fontCol="p",s}return _inherits(i,t),_createClass(i,[{key:"update",value:function(){var t=this,i=this.g.input.m.click;this.fontCol="p",this.fadeIn-=1,this.hover=this.intersects(),this.hover&&(this.g.c.className="hover",this.fontCol="pHover"),this.currentCol=this.hover||this.hover&&i?this.clickCol:this.col,(!this.clicked&&this.hover&&i||!this.clicked&&this.triggerOnEnter&&this.g.input.keys.enter)&&(this.g.audio.play("tap"),this.clicked=!0,setTimeout(function(){t.cb.call()},this.delay))}},{key:"render",value:function(){var t=this.hover?this.pHover:this.p;this.g.draw.rect(this.boxX,this.boxY,this.w,this.h,this.currentCol),this.g.draw.text(this.text,t,this.x,this.y)}},{key:"intersects",value:function(){var t=this.g.input.m;return t.x>this.boxX&&t.x<this.boxX+this.w&&t.y>this.boxY&&t.y<this.boxY+this.h}}]),i}(Sprite),Title=function(t){function i(){return _classCallCheck(this,i),_possibleConstructorReturn(this,Object.getPrototypeOf(i).apply(this,arguments))}return _inherits(i,t),_createClass(i,[{key:"init",value:function(){var t=this;this.g.hiScore||(this.g.hiScore=20);var i=0===this.g.plays?"Intro":"Play",e=0===this.g.plays?1.5:.5;console.log(e),this.bgCol=$.cols.nightblue,this.hi=this.g.mkFont("w",3),this.sm=this.g.mkFont("w",2),this.g.addEvent({time:e,cb:function(){t.g.ents.push(new Button(t.g,{y:380,triggerOnEnter:!0,col:$.cols.leafgreen,state:i,text:"PLAY",cb:function(){t.g.changeState(i)}})),t.g.ents.push(new Button(t.g,{y:450,size:2,clickCol:$.cols.blaze,col:$.cols.blaze,state:i,text:"BY EOINMCG",cb:function(){window.location="//twitter.com/eoinmcg"}}))}}),this.g.ents.push(new Label(this.g,{p:this,speed:this.g.plays>0?100:1e3})),this.bubble()}},{key:"render",value:function(){this.g.draw.clear(this.bgCol),this.g.draw.rect(125,70,70,100,$.cols.blaze),this.g.draw.rect(60,170,200,330,$.cols.blaze),this.g.draw.text("HI ",this.hi,20,20),this.g.draw.text(this.g.hiScore,this.hi,50,20);var t=!0,i=!1,e=void 0;try{for(var s,h=this.g.ents[Symbol.iterator]();!(t=(s=h.next()).done);t=!0){var a=s.value;a.render()}}catch(n){i=!0,e=n}finally{try{!t&&h["return"]&&h["return"]()}finally{if(i)throw e}}this.g.draw.rect(0,170,60,330,this.bgCol)}},{key:"bubble",value:function(){var t=this;this.g.addEvent({time:$.H.rnd(.1,2),cb:function(){t.bubble()}}),this.g.ents.push(new Bonus(this.g,{x:$.H.rnd(102,108),y:50}))}}]),i}(State),Intro=function(t){function i(){return _classCallCheck(this,i),_possibleConstructorReturn(this,Object.getPrototypeOf(i).apply(this,arguments))}return _inherits(i,t),_createClass(i,[{key:"init",value:function(){var t=this;this.p=this.g.mkFont("w",4),this.hills=this.g.draw.scale(this.g.imgs.hills,2),this.grass=this.g.draw.scale(this.g.imgs.grass,2),this.floor=377,this.p1=new P1(this.g,{x:100,y:this.floor,p:this}),this.g.ents.push(this.p1),this.cloud=new Sprite(this.g,{x:0,y:50,p:this,frames:3,scale:4,i:"cloud"}),this.cloud.x=this.g.w/2-this.cloud.w/2,this.g.ents.push(this.cloud),this.flip=0,this.addText("OHAI",.1),this.addText("BEJAYSUS",2),this.addText("LOOK UP",3),this.addText("WHISKEY CLOUD",4),this.addText("LIQUID GOLD",6),this.addText("RAINING FROM ABOVE",7),this.addText("DRINK UP BOYO",8),this.addText("DONT",10,4,"r"),this.addText("SPILL",10.7,4,"r"),this.addText("A",11.4,4,"r"),this.addText("DROP",12.1,4,"r"),this.g.addEvent({time:15,cb:function(){console.log("OK"),t.g.changeState("Play")}}),this.skip=this.g.ents.push(new Button(this.g,{y:450,triggerOnEnter:!1,col:$.cols.oldpoop,state:"Play",text:"SKIP",cb:function(){t.g.changeState("Play")}}))}},{key:"update",value:function(){_get(Object.getPrototypeOf(i.prototype),"update",this).call(this),this.p1.changeAnim("stand"),this.p1.x=this.g.w/2-this.p1.w/2,this.p1.flip.x=this.flip}},{key:"render",value:function(){this.g.draw.clear($.cols.cloudblue),this.g.ctx.drawImage(this.hills,0,290),this.g.ctx.drawImage(this.grass,0,400);var t=!0,i=!1,e=void 0;try{for(var s,h=this.g.ents[Symbol.iterator]();!(t=(s=h.next()).done);t=!0){var a=s.value;a.render()}}catch(n){i=!0,e=n}finally{try{!t&&h["return"]&&h["return"]()}finally{if(i)throw e}}}},{key:"addText",value:function(t,i){var e=this,s=arguments.length<=2||void 0===arguments[2]?3:arguments[2],h=arguments.length<=3||void 0===arguments[3]?"w":arguments[3];this.g.addEvent({time:i,cb:function(){e.g.audio.play("tap"),e.g.ents.push(new Text(e.g,{x:!1,y:350,text:t,scale:s,col:h})),e.flip=e.flip?0:1}})}}]),i}(State),Play=function(t){function i(){return _classCallCheck(this,i),_possibleConstructorReturn(this,Object.getPrototypeOf(i).apply(this,arguments))}return _inherits(i,t),_createClass(i,[{key:"init",value:function(){this.g.plays+=1,this.gameOver=!1,this.floor=377,this.p=this.g.mkFont("r",7),this.g.player=new P1(this.g,{x:100,y:this.floor,p:this}),this.g.ents.push(this.g.player),this.g.cloud=new Cloud(this.g,{x:100,y:50,p:this}),this.g.ents.push(this.g.cloud),this.g.audio.play("levelup"),this.hills=this.g.draw.scale(this.g.imgs.hills,2),this.grass=this.g.draw.scale(this.g.imgs.grass,2),this.heart=this.g.draw.scale(this.g.imgs.heart,4),this.g.lives=2,this.g.score=0,this.scoreFont=this.g.mkFont("w",4),this.spilt=!1,this.sky=new Sky(this.g,this),this.wave=0,this.startWave()}},{key:"update",value:function(){var t=this;_get(Object.getPrototypeOf(i.prototype),"update",this).call(this),this.g.lives<0&&!this.gameOver&&(this.g.audio.play("gameover"),this.g.player.changeAnim("gulp"),this.gameOver=!0,this.g.score>this.g.hiScore&&(this.g.hiScore=this.g.score,this.g.ents.push(new Text(this.g,{x:!1,y:350,text:"NEW HISCORE",scale:6,col:"w"}))),this.g.addEvent({time:3,cb:function(){t.startButton=t.g.ents.push(new Button(t.g,{y:280,triggerOnEnter:!0,col:$.cols.pigmeat,state:"Play",text:"RETRY",cb:function(){t.g.audio.play("tap"),t.g.changeState("Play")}})),t.quitButton=t.g.ents.push(new Button(t.g,{y:360,col:$.cols.skyblue,state:"Title",text:"TWEET",cb:function(){window.location="https://twitter.com/intent/tweet?&text=I+scored+"+t.g.score+"+in+Whiskey+Fever&via=eoinmcg&url=https%3A%2F%2Feoinmcg.github.io%2Fwhiskey"}}))}})),this.inWave<0&&!this.waveInterval&&(this.waveInterval=!0,this.g.addEvent({time:2,cb:function(){t.startWave()}})),this.sky.update()}},{key:"render",value:function(){this.g.draw.clear($.cols.cloudblue),this.g.ctx.drawImage(this.hills,0,290),this.sky.render(),this.g.ctx.drawImage(this.grass,0,400);var t=!0,i=!1,e=void 0;try{for(var s,h=this.g.ents[Symbol.iterator]();!(t=(s=h.next()).done);t=!0){var a=s.value;a.render()}}catch(n){i=!0,e=n}finally{try{!t&&h["return"]&&h["return"]()}finally{if(i)throw e}}this.gameOver&&this.fader>0&&this.g.draw.text("GAME OVER",this.p,!1,200);for(var r=0;r<this.g.lives;r+=1)this.g.ctx.drawImage(this.heart,220+27*r,20);this.g.draw.text(this.g.score,this.scoreFont,20,20)}},{key:"doSpill",value:function(){var t=this;this.spilt=!0,this.g.addEvent({time:.5,cb:function(){t.explodeDrips()}})}},{key:"explodeDrips",value:function(){var t=0,i=!1;for(t=0;t<this.g.ents.length;t+=1)if("drop"===this.g.ents[t].name){i=!0,this.g.audio.play("drip"),this.g.ents[t].explode(),this.doSpill();break}i||(this.spilt=!1,this.g.lives-=1,1!==this.wave&&(this.wave-=2,this.startWave()))}},{key:"spawn",value:function(){var t=this,i=($.H.rnd(2,6),$.H.rnd(.5,2.5));this.gameOver||this.inWave<0||this.g.addEvent({time:i,cb:function(){!t.gameOver&&t.inWave>=0&&(t.spawn(),t.spilt||(t.g.cloud.changeAnim("burp"),t.g.audio.play("fart"),t.g.ents.push(new Drop(t.g,{p:t,x:t.g.cloud.x+t.g.cloud.w/2,y:t.g.cloud.y+t.g.cloud.h}))))}})}},{key:"startWave",value:function(){var t=0;this.wave+=1,this.inWave=1+2*this.wave,this.waveInterval=!1,t=this.wave<8?this.wave/10:1.5,this.g.player.vx=this.wave>2?6:4,this.delay={min:.5,max:2.6-t}}},{key:"doDrop",value:function(){this.spilt||(this.g.cloud.changeAnim("burp"),this.g.audio.play("fart"),this.g.ents.push(new Drop(this.g,{p:this,x:this.g.cloud.x+this.g.cloud.w/2,y:this.g.cloud.y+this.g.cloud.h})))}}]),i}(State),Label=function(t){function i(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,i);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(i).call(this,t,e));return s.h1=s.g.mkFont("w",5),s.p=s.g.mkFont("r",3),s.w=150,s.h=120,s.destX=85,s.distX=0,s.x=-10,s.y=220,s.vx=1,s}return _inherits(i,t),_createClass(i,[{key:"update",value:function(){this.distX=this.destX-this.x,this.x=$.H.tween(33,this.x,this.distX,this.speed)}},{key:"render",value:function(){this.g.draw.rect(this.x,this.y,150,120,$.cols.black),this.g.draw.text("WHISKEY",this.h1,this.x+8,this.y+30),this.g.draw.text("F E V E R",this.p,this.x+18,this.y+70)}}]),i}(Sprite),P1=function(t){function i(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,i),e.w=16,e.h=16,e.group="player",e.collidesWith="baddie",e.frames=6,e.scale=4,e.i="p1";var s=_possibleConstructorReturn(this,Object.getPrototypeOf(i).call(this,t,e));return s.x=t.w/2-s.w/2,s}return _inherits(i,t),_createClass(i,[{key:"init",value:function(){this.anims={walk:{frames:[2,1],rate:80},fry:{frames:[6,4],rate:80},stand:{frames:[1,1,1,5,1,1],rate:200},gulp:{frames:[3],rate:100,next:"stand"}},this.changeAnim("walk")}},{key:"updateMove",value:function(){var t=(this.g.input.keys,this.g.input.m);if(!this.p.gameOver){if(this.p.spilt)return void this.changeAnim("gulp");this.x=t.x-this.w/2,this.lastPos.x<this.x?this.flip.x=0:this.lastPos.x>this.x&&(this.flip.x=1),this.lastPos.x!==this.x&&"walk"!==this.anim.name&&"gulp"!==this.anim.name?this.changeAnim("walk"):this.lastPos.x===this.x&&"gulp"!==this.anim.name&&this.changeAnim("stand")}}},{key:"render",value:function(){_get(Object.getPrototypeOf(i.prototype),"render",this).call(this)}},{key:"receiveDamage",value:function(t){console.log(t.group)}},{key:"doDamage",value:function(t){t.kill()}},{key:"kill",value:function(){this.g.audio.play("die"),this.g.emitter.particle(20,this.x+this.w/2,this.y+this.h/2,["slimegreen","bloodred"]),_get(Object.getPrototypeOf(i.prototype),"kill",this).call(this)}}]),i}(Sprite),Sky=function(){function t(i,e){_classCallCheck(this,t),this.g=i,this.p=e,this.cols=["ash","blind"],this.changeStep=10,this.change=0,this.col=$.H.rndArray(this.cols)}return _createClass(t,[{key:"update",value:function(){this.p.spilt&&(this.change-=1,this.change<=0&&(this.change=this.changeStep,this.col=$.H.rndArray(this.cols)))}},{key:"render",value:function(){this.p.spilt?this.g.draw.clear($.cols[this.col]):this.g.player.dead?this.g.draw.clear($.cols.black):this.p.gameOver&&this.g.draw.clear($.cols.ash)}}]),t}(),Cloud=function(t){function i(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,i),e.w=16,e.h=16,e.group="cloud",e.collidesWith="baddie",e.frames=3,e.scale=4,e.vx=4,e.vy=4,e.i="cloud";var s=_possibleConstructorReturn(this,Object.getPrototypeOf(i).call(this,t,e));return s.dir=1,s.changeDir=30,s.drop=20,s.lightning=0,s.hasShocked=0,s.x=t.w/2-s.w/2,s}return _inherits(i,t),_createClass(i,[{key:"init",value:function(){this.anims={idle:{frames:[1],rate:100},laugh:{frames:[1,2],rate:100},burp:{frames:[2],rate:50,next:"idle"},rage:{frames:[3],rate:100,next:"idle"}},this.changeAnim("idle")}},{key:"update",value:function(){return this.p.gameOver?void(this.x<this.g.player.x-this.w/2+5?this.x+=1:this.x>this.g.player.x-this.w/2+5?this.x-=1:0!==this.lightning||this.hasShocked?0===this.lightning&&this.hasShocked?this.g.player.dead===!1&&(this.changeAnim("laugh"),this.g.player.kill()):this.lightning-=1:(this.g.lightning=this.g.ents.push(new Lightning(this.g,{x:this.x,y:this.y+this.h-0})),this.lightning=80,this.hasShocked=!0,this.g.shake.start(50,30),this.g.player.changeAnim("fry"))):void(this.p.spilt||this.p.inWave<0||(this.x<=0?this.dir=1:this.x>=this.g.w-this.w&&(this.dir=-1),this.changeDir<=0&&(this.vx=~~(4*Math.random())+this.p.wave,this.dir=this.dir*-1,this.changeDir=~~(Math.random()*(this.g.w-this.w)/2)),this.drop<=0&&(this.drop=$.H.rnd(15,30),this.p.doDrop()),this.x+=this.dir*this.vx,this.updateAnim(),this.changeDir--,this.drop--))}},{key:"render",value:function(){_get(Object.getPrototypeOf(i.prototype),"render",this).call(this)}}]),i}(Sprite),Lightning=function(t){function i(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,i),e.vx=0,e.vy=0,e.scale=13,e.i="lightning",e.name=e.i;var s=_possibleConstructorReturn(this,Object.getPrototypeOf(i).call(this,t,e));return s.invert=$.H.rnd(30,50),s.g.audio.play("explode"),s}return _inherits(i,t),_createClass(i,[{key:"update",value:function(){this.invert--,0===this.invert&&(this.flip.x=0===this.flip.x?1:0,this.invert=$.H.rnd(30,50)),this.g.player.dead&&this.kill(),_get(Object.getPrototypeOf(i.prototype),"update",this).call(this)}}]),i}(Sprite),Explosion=function(t){function i(t,e){_classCallCheck(this,i);e.i="circle";var s=_possibleConstructorReturn(this,Object.getPrototypeOf(i).call(this,t,e));return s.name="explosion",s.group="na",s.startX=e.x,s.startY=e.y,
s.particles=e.particles||3,s.magnitude=e.magnitude||9,s.factor=1,s.angle=0,s.grow=1,s}return _inherits(i,t),_createClass(i,[{key:"update",value:function(){this.g;_get(Object.getPrototypeOf(i.prototype),"update",this).call(this),this.scale<=this.magnitude&&(this.scale+=this.factor),this.scale===this.magnitude&&(this.factor*=-1),this.scale<=1&&(this.remove=!0),this.mkImg("circle")}},{key:"render",value:function(){var t=this.startX-this.w/2,i=this.startY-this.h/2,e=this.g,s=this.i;e.ctx.drawImage(s,t,i)}}]),i}(Sprite),Drop=function(t){function i(t,e){_classCallCheck(this,i),e.vx=0,e.vy=0,e.gravity=.1,e.scale=3,e.i="drop",e.group="baddie";var s=_possibleConstructorReturn(this,Object.getPrototypeOf(i).call(this,t,e));return s.name="drop",s}return _inherits(i,t),_createClass(i,[{key:"updateMove",value:function(){var t=this.g.dt/1e3;return!!this.p.spilt||(this.x+=this.vx*t,this.y+=this.vy*t,this.vy+=this.gravity*t,void((this.y>this.p.floor+4||this.p.gameOver)&&(this.dead=!0,this.g.audio.play("drip"),this.g.shake.start(30,20),this.explode(),this.p.doSpill())))}},{key:"explode",value:function(){this.kill(),this.g.cloud.changeAnim("rage"),this.g.emitter.particle(5,this.x+this.w/2,this.y+this.h/2,["blaze"])}},{key:"receiveDamage",value:function(t){var i="drink";this.kill(),this.g.audio.play(i),this.g.score+=1,this.g.player.changeAnim("gulp"),this.g.ios||this.g.ents.push(new Bonus(this.g,{x:this.x,y:this.y}))}},{key:"kill",value:function(){this.p.inWave-=1,_get(Object.getPrototypeOf(i.prototype),"kill",this).call(this)}}]),i}(Sprite),Bonus=function(t){function i(t,e){_classCallCheck(this,i),e.group="bonus",e.vx=$.H.rnd(-40,40),e.vy=-180,e.w=10,e.w=10,e.scale=1,e.i="circle",e.o=1;var s=_possibleConstructorReturn(this,Object.getPrototypeOf(i).call(this,t,e));return s.fader=0,s}return _inherits(i,t),_createClass(i,[{key:"update",value:function(){this.mkImg("circle"),this.fader=Math.sin(.002*(new Date).getTime()),(this.y<0||this.o<=.1)&&this.kill();var t=this.g.dt/1e3;this.x+=this.vx*t+this.fader,this.y+=this.vy*t,this.o-=t}},{key:"render",value:function(){this.g.ctx.globalAlpha=this.o,this.g.ctx.drawImage(this.iHurt,this.x,this.y),this.g.ctx.globalAlpha=1}}]),i}(Sprite),Text=function(t){function i(t,e){_classCallCheck(this,i),e.group="text",e.vx=0,e.vy=-40,e.w=10,e.w=10,e.o=1,e.scale=e.scale||3,e.col=e.col||"w";var s=_possibleConstructorReturn(this,Object.getPrototypeOf(i).call(this,t,e));return s.p=t.mkFont(e.col,e.scale),s}return _inherits(i,t),_createClass(i,[{key:"update",value:function(){(this.y<0||this.o<=.2)&&this.kill();var t=this.g.dt/1e3;this.x+=this.vx*t,this.y+=this.vy*t,this.o-=t/5}},{key:"render",value:function(){this.g.ctx.globalAlpha=this.o,this.g.draw.text(this.text,this.p,this.x,this.y),this.g.ctx.globalAlpha=1}}]),i}(Sprite);</script></body></html>